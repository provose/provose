<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-156547622-4"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-156547622-4'); </script> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>lustre_file_systems | Provose</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="lustre_file_systems" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Provose is the easiest way to manage your Amazon Web Services infrastructure." /> <meta property="og:description" content="Provose is the easiest way to manage your Amazon Web Services infrastructure." /> <link rel="canonical" href="/v3.0/reference/lustre_file_systems/" /> <meta property="og:url" content="/v3.0/reference/lustre_file_systems/" /> <meta property="og:site_name" content="Provose" /> <meta property="og:image" content="/assets/images/1x/twitter-facebook-preview-card-1x.png" /> <meta name="twitter:card" content="summary_large_image" /> <meta property="twitter:image" content="/assets/images/1x/twitter-facebook-preview-card-1x.png" /> <meta property="twitter:title" content="lustre_file_systems" /> <meta name="twitter:site" content="@neocrym" /> <script type="application/ld+json"> {"description":"Provose is the easiest way to manage your Amazon Web Services infrastructure.","@type":"WebPage","headline":"lustre_file_systems","url":"/v3.0/reference/lustre_file_systems/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/assets/images/1x/logo-black-on-transparent-1x.png"}},"image":"/assets/images/1x/twitter-facebook-preview-card-1x.png","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"> <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"> <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"> <link rel="manifest" href="/site.webmanifest"> <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#2869e6"> <meta name="msapplication-TileColor" content="#2869e6"> <meta name="theme-color" content="#ffffff"> <!-- From https://www.osano.com/cookieconsent/download/ --> <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css" /> <!-- From https://www.osano.com/cookieconsent/download/ --> <script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script> <script> window.cookieconsent.initialise({ "palette": { "popup": { "background": "#252e39" }, "button": { "background": "#14a7d0" } }, "theme": "edgeless", "content": { "message": "Provose uses cookies in order for us to better understand users and catch our own mistakes.", "href": "https://provose.com/privacy/" } }); </script> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/about/" class="nav-list-link">About</a></li><li class="nav-list-item"><a href="/contributing/" class="nav-list-link">Contributing to Provose</a></li><li class="nav-list-item"><a href="/changelog/" class="nav-list-link">Changelog</a></li><li class="nav-list-item"><a href="/philosophy/" class="nav-list-link">Philosophy</a></li><li class="nav-list-item"><a href="/security/" class="nav-list-link">Security</a></li><li class="nav-list-item"><a href="/naming/" class="nav-list-link">DNS and naming conventions</a></li><li class="nav-list-item"><a href="/amazon-machine-images-amis/" class="nav-list-link">Amazon Machine Images (AMIs)</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/v3.0/" class="nav-list-link">Docs v3.0 (Stable)</a><ul class="nav-list "><li class="nav-list-item "><a href="/v3.0/release-notes/" class="nav-list-link">Release notes</a></li><li class="nav-list-item "><a href="/v3.0/tutorial/" class="nav-list-link">Tutorial</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/v3.0/reference/" class="nav-list-link">Reference v3.0 (Stable)</a><ul class="nav-list"><li class="nav-list-item "> <a href="/v3.0/reference/batch/" class="nav-list-link">batch</a> </li><li class="nav-list-item "> <a href="/v3.0/reference/containers/" class="nav-list-link">containers</a> </li><li class="nav-list-item "> <a href="/v3.0/reference/ec2_on_demand_instances/" class="nav-list-link">ec2_on_demand_instances</a> </li><li class="nav-list-item "> <a href="/v3.0/reference/ec2_spot_instances/" class="nav-list-link">ec2_spot_instances</a> </li><li class="nav-list-item "> <a href="/v3.0/reference/elastic_file_systems/" class="nav-list-link">elastic_file_systems</a> </li><li class="nav-list-item "> <a href="/v3.0/reference/elasticsearch_clusters/" class="nav-list-link">elasticsearch_clusters</a> </li><li class="nav-list-item "> <a href="/v3.0/reference/https_redirects/" class="nav-list-link">https_redirects</a> </li><li class="nav-list-item "> <a href="/v3.0/reference/images/" class="nav-list-link">images</a> </li><li class="nav-list-item active"> <a href="/v3.0/reference/lustre_file_systems/" class="nav-list-link active">lustre_file_systems</a> </li><li class="nav-list-item "> <a href="/v3.0/reference/mysql_clusters/" class="nav-list-link">mysql_clusters</a> </li><li class="nav-list-item "> <a href="/v3.0/reference/overrides/" class="nav-list-link">overrides</a> </li><li class="nav-list-item "> <a href="/v3.0/reference/postgresql_clusters/" class="nav-list-link">postgresql_clusters</a> </li><li class="nav-list-item "> <a href="/v3.0/reference/provose_config/" class="nav-list-link">provose_config</a> </li><li class="nav-list-item "> <a href="/v3.0/reference/redis_clusters/" class="nav-list-link">redis_clusters</a> </li><li class="nav-list-item "> <a href="/v3.0/reference/s3_buckets/" class="nav-list-link">s3_buckets</a> </li><li class="nav-list-item "> <a href="/v3.0/reference/secrets/" class="nav-list-link">secrets</a> </li><li class="nav-list-item "> <a href="/v3.0/reference/source/" class="nav-list-link">source</a> </li></ul></li><li class="nav-list-item "><a href="/v3.0/debugging/" class="nav-list-link">Debugging</a></li><li class="nav-list-item "><a href="/v3.0/uninstalling/" class="nav-list-link">Uninstalling Provose</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/v2.0/" class="nav-list-link">Docs v2.0 (Deprecated)</a><ul class="nav-list "><li class="nav-list-item "><a href="/v2.0/release-notes/" class="nav-list-link">Release notes</a></li><li class="nav-list-item "><a href="/v2.0/tutorial/" class="nav-list-link">Tutorial</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/v2.0/reference/" class="nav-list-link">Reference v2.0 (Deprecated)</a><ul class="nav-list"><li class="nav-list-item "> <a href="/v2.0/reference/batch/" class="nav-list-link">batch</a> </li><li class="nav-list-item "> <a href="/v2.0/reference/containers/" class="nav-list-link">containers</a> </li><li class="nav-list-item "> <a href="/v2.0/reference/ec2_on_demand_instances/" class="nav-list-link">ec2_on_demand_instances</a> </li><li class="nav-list-item "> <a href="/v2.0/reference/ec2_spot_instances/" class="nav-list-link">ec2_spot_instances</a> </li><li class="nav-list-item "> <a href="/v2.0/reference/elastic_file_systems/" class="nav-list-link">elastic_file_systems</a> </li><li class="nav-list-item "> <a href="/v2.0/reference/elasticsearch_clusters/" class="nav-list-link">elasticsearch_clusters</a> </li><li class="nav-list-item "> <a href="/v2.0/reference/https_redirects/" class="nav-list-link">https_redirects</a> </li><li class="nav-list-item "> <a href="/v2.0/reference/images/" class="nav-list-link">images</a> </li><li class="nav-list-item "> <a href="/v2.0/reference/lustre_file_systems/" class="nav-list-link">lustre_file_systems</a> </li><li class="nav-list-item "> <a href="/v2.0/reference/mysql_clusters/" class="nav-list-link">mysql_clusters</a> </li><li class="nav-list-item "> <a href="/v2.0/reference/overrides/" class="nav-list-link">overrides</a> </li><li class="nav-list-item "> <a href="/v2.0/reference/postgresql_clusters/" class="nav-list-link">postgresql_clusters</a> </li><li class="nav-list-item "> <a href="/v2.0/reference/provose_config/" class="nav-list-link">provose_config</a> </li><li class="nav-list-item "> <a href="/v2.0/reference/redis_clusters/" class="nav-list-link">redis_clusters</a> </li><li class="nav-list-item "> <a href="/v2.0/reference/s3_buckets/" class="nav-list-link">s3_buckets</a> </li><li class="nav-list-item "> <a href="/v2.0/reference/secrets/" class="nav-list-link">secrets</a> </li><li class="nav-list-item "> <a href="/v2.0/reference/source/" class="nav-list-link">source</a> </li></ul></li><li class="nav-list-item "><a href="/v2.0/debugging/" class="nav-list-link">Debugging</a></li><li class="nav-list-item "><a href="/v2.0/uninstalling/" class="nav-list-link">Uninstalling Provose</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/v1.1/" class="nav-list-link">Docs v1.1 (Deprecated)</a><ul class="nav-list "><li class="nav-list-item "><a href="/v1.1/release-notes/" class="nav-list-link">Release notes</a></li><li class="nav-list-item "><a href="/v1.1/tutorial/" class="nav-list-link">Tutorial</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/v1.1/reference/" class="nav-list-link">Reference v1.1 (Deprecated)</a><ul class="nav-list"><li class="nav-list-item "> <a href="/v1.1/reference/containers/" class="nav-list-link">containers</a> </li><li class="nav-list-item "> <a href="/v1.1/reference/ec2_instances/" class="nav-list-link">ec2_instances</a> </li><li class="nav-list-item "> <a href="/v1.1/reference/elasticsearch_clusters/" class="nav-list-link">elasticsearch_clusters</a> </li><li class="nav-list-item "> <a href="/v1.1/reference/images/" class="nav-list-link">images</a> </li><li class="nav-list-item "> <a href="/v1.1/reference/mysql_clusters/" class="nav-list-link">mysql_clusters</a> </li><li class="nav-list-item "> <a href="/v1.1/reference/overrides/" class="nav-list-link">overrides</a> </li><li class="nav-list-item "> <a href="/v1.1/reference/postgresql_clusters/" class="nav-list-link">postgresql_clusters</a> </li><li class="nav-list-item "> <a href="/v1.1/reference/provose_config/" class="nav-list-link">provose_config</a> </li><li class="nav-list-item "> <a href="/v1.1/reference/redis_clusters/" class="nav-list-link">redis_clusters</a> </li><li class="nav-list-item "> <a href="/v1.1/reference/s3_buckets/" class="nav-list-link">s3_buckets</a> </li><li class="nav-list-item "> <a href="/v1.1/reference/secrets/" class="nav-list-link">secrets</a> </li><li class="nav-list-item "> <a href="/v1.1/reference/source/" class="nav-list-link">source</a> </li></ul></li><li class="nav-list-item "><a href="/v1.1/debugging/" class="nav-list-link">Debugging</a></li><li class="nav-list-item "><a href="/v1.1/uninstalling/" class="nav-list-link">Uninstalling Provose</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/v1.0/" class="nav-list-link">Docs v1.0 (Deprecated)</a><ul class="nav-list "><li class="nav-list-item "><a href="/v1.0/release-notes/" class="nav-list-link">Release notes</a></li><li class="nav-list-item "><a href="/v1.0/tutorial/" class="nav-list-link">Tutorial</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/v1.0/reference/" class="nav-list-link">Reference v1.0 (Deprecated)</a><ul class="nav-list"><li class="nav-list-item "> <a href="/v1.0/reference/containers/" class="nav-list-link">containers</a> </li><li class="nav-list-item "> <a href="/v1.0/reference/ec2_instances/" class="nav-list-link">ec2_instances</a> </li><li class="nav-list-item "> <a href="/v1.0/reference/elasticsearch_clusters/" class="nav-list-link">elasticsearch_clusters</a> </li><li class="nav-list-item "> <a href="/v1.0/reference/images/" class="nav-list-link">images</a> </li><li class="nav-list-item "> <a href="/v1.0/reference/mysql_clusters/" class="nav-list-link">mysql_clusters</a> </li><li class="nav-list-item "> <a href="/v1.0/reference/overrides/" class="nav-list-link">overrides</a> </li><li class="nav-list-item "> <a href="/v1.0/reference/postgresql_clusters/" class="nav-list-link">postgresql_clusters</a> </li><li class="nav-list-item "> <a href="/v1.0/reference/provose_config/" class="nav-list-link">provose_config</a> </li><li class="nav-list-item "> <a href="/v1.0/reference/redis_clusters/" class="nav-list-link">redis_clusters</a> </li><li class="nav-list-item "> <a href="/v1.0/reference/s3_buckets/" class="nav-list-link">s3_buckets</a> </li><li class="nav-list-item "> <a href="/v1.0/reference/secrets/" class="nav-list-link">secrets</a> </li><li class="nav-list-item "> <a href="/v1.0/reference/source/" class="nav-list-link">source</a> </li></ul></li><li class="nav-list-item "><a href="/v1.0/debugging/" class="nav-list-link">Debugging</a></li><li class="nav-list-item "><a href="/v1.0/uninstalling/" class="nav-list-link">Uninstalling Provose</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Provose" aria-label="Search Provose" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/provose/provose/" class="site-button" > Provose on GitHub </a> </li> <li class="aux-nav-list-item"> <a href="https://www.neocrym.com" class="site-button" > Neocrym.com </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/v3.0/">Docs v3.0 (Stable)</a></li> <li class="breadcrumb-nav-list-item"><a href="/v3.0/reference/">Reference v3.0 (Stable)</a></li> <li class="breadcrumb-nav-list-item"><span>lustre_file_systems</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="lustre_file_systems"> <a href="#lustre_file_systems" class="anchor-heading" aria-labelledby="lustre_file_systems"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> lustre_file_systems </h1> <h2 id="description"> <a href="#description" class="anchor-heading" aria-labelledby="description"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Description </h2> <p>This Provose configuration sets up AWS FSx Lustre clusters. Lustre is a high-performance networked filesytem commonly used in supercomputing. AWS FSx Lustre is Amazon Web Services’ managed Lustre offering.</p> <p>AWS FSx Lustre is appropriate for compute workloads that require large amounts of data and would otherwise be I/O-bound. For example, terabyte-scale machine learning typically requires fast storage, and FSx Lustre is a popular choice.</p> <h3 id="beware-of-long-timeouts-and-tainting"> <a href="#beware-of-long-timeouts-and-tainting" class="anchor-heading" aria-labelledby="beware-of-long-timeouts-and-tainting"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Beware of long timeouts and “tainting” </h3> <p>AWS FSx Lustre clusters can take a long time to deploy–even multiple hours. By default, Terraform will wait 30 minutes before timing out. When this happens, you should use the AWS Web Console or the command line to check the status of your cluster. When you see a timeout from Terraform, you should <strong>not</strong> rerun Terraform before the cluster has finished deploying, otherwise this will destroy your cluster.</p> <p>When your cluster has finished deploying, Terraform might consider it <em>“tainted”</em> because it timed out during the cluster’s creation. However, in all likelihood, your cluster is most likely fine. If Terraform says something like</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># module.{your-module-name}.aws_fsx_lustre_file_system.lustre_file_systems["{your-cluster-name}"] is tainted, so must be replaced
</code></pre></div></div> <p>then run this command:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>terraform untaint 'module.{your-module-name}.aws_fsx_lustre_file_system.lustre_file_systems["{your-cluster-name}"]'
</code></pre></div></div> <p>with replacing <code class="language-plaintext highlighter-rouge">{your-module-name}</code> and <code class="language-plaintext highlighter-rouge">{your-cluster-name}</code> as appropriate. Make sure to wrap your resource name in single quotes (<code class="language-plaintext highlighter-rouge">'</code>) to prevent your shell from interpreting the <code class="language-plaintext highlighter-rouge">[</code>, <code class="language-plaintext highlighter-rouge">]</code>. and <code class="language-plaintext highlighter-rouge">"</code> characters.</p> <h2 id="examples"> <a href="#examples" class="anchor-heading" aria-labelledby="examples"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Examples </h2> <div class="language-terraform highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="s2">"myproject"</span> <span class="p">{</span>
  <span class="nx">source</span> <span class="p">=</span> <span class="s2">"github.com/provose/provose?ref=v3.0.0"</span>
  <span class="nx">provose_config</span> <span class="p">=</span> <span class="p">{</span>
    <span class="nx">authentication</span> <span class="p">=</span> <span class="p">{</span>
      <span class="nx">aws</span> <span class="p">=</span> <span class="p">{</span>
        <span class="nx">region</span> <span class="p">=</span> <span class="s2">"us-east-1"</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">name</span>                 <span class="p">=</span> <span class="s2">"myproject"</span>
    <span class="nx">internal_root_domain</span> <span class="p">=</span> <span class="s2">"example-internal.com"</span>
    <span class="nx">internal_subdomain</span>   <span class="p">=</span> <span class="s2">"myproject"</span>
  <span class="p">}</span>
  <span class="c1"># Here we create an AWS S3 bucket that we will use as the data repository</span>
  <span class="c1"># for our Lustre cluster. Data repositories are not necessary if you want</span>
  <span class="c1"># to spin up an empty Lustre cluster.</span>
  <span class="nx">s3_buckets</span> <span class="p">=</span> <span class="p">{</span>
    <span class="s2">"mydata.myproject.example-internal.com"</span> <span class="p">=</span> <span class="p">{</span>
      <span class="nx">versioning</span> <span class="p">=</span> <span class="kc">false</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="nx">lustre_file_systems</span> <span class="p">=</span> <span class="p">{</span>
    <span class="nx">mydatacache</span> <span class="p">=</span> <span class="p">{</span>
      <span class="c1"># SCRATCH_2 clusters are appropriate for when you need fast reads and writes,</span>
      <span class="c1"># but do not need automated replication. If you want higher guarantees of</span>
      <span class="c1"># persistence, use the "PERSISTENT" deployment type.</span>
      <span class="nx">deployment_type</span> <span class="p">=</span> <span class="s2">"SCRATCH_2"</span>

      <span class="c1"># Currently this is the smallest storage size that can be deployed.</span>
      <span class="nx">storage_capacity_gb</span> <span class="p">=</span> <span class="mi">12000</span>

      <span class="c1"># Here we specify the S3 bucket and key prefix for loading into this</span>
      <span class="c1"># cluster. These can be set to different paths, but if they are set to the</span>
      <span class="c1"># same path, then writes to these files in Lustre will be written back</span>
      <span class="c1"># to S3.</span>
      <span class="nx">s3_import_path</span> <span class="p">=</span> <span class="s2">"s3://mydata.myproject.example-internal.com/prefix/"</span>
      <span class="nx">s3_export_path</span> <span class="p">=</span> <span class="s2">"s3://mydata.myproject.example-internal.com/prefix/"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div> <h2 id="inputs"> <a href="#inputs" class="anchor-heading" aria-labelledby="inputs"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Inputs </h2> <ul> <li> <p><code class="language-plaintext highlighter-rouge">deployment_type</code> – <strong>Required.</strong> The filesystem deployment type. Currently this can be one of the following values. The <a href="https://aws.amazon.com/blogs/aws/amazon-fsx-for-lustre-persistent-storage/">AWS documentation has more information</a> about the differences between the deployment types.</p> <ul> <li> <p><code class="language-plaintext highlighter-rouge">"SCRATCH_1"</code> – The original storage type for AWS FSx Lustre. This is typically used for storing temporary data and intermediate computations. This storage type is not replicated, which makes it less reliable for long-term storage.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">"SCRATCH_2"</code> – A scratch storage type with a much higher burst speed. This is also not replicated.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">"PERSISTENT_1"</code> – A storage type that offers replication in the same Availability Zone (AZ), which makes it more appropriate for long-term storage.</p> </li> </ul> </li> <li> <p><code class="language-plaintext highlighter-rouge">storage_capacity_gb</code> – <strong>Required.</strong> This is the total storage capacity of the Lustre cluster in gibibytes. The minimum value is 1200, which is about 1.2 tebibytes. The next valid value is 2400. From there, the valid capacity values go up in increments of 2400 for the <code class="language-plaintext highlighter-rouge">"PERSISTENT_1"</code> and <code class="language-plaintext highlighter-rouge">"SCRATCH_2"</code> types, and in increments of 3600 for the <code class="language-plaintext highlighter-rouge">"SCRATCH_1"</code> type.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">per_unit_storage_throughput_mb_per_tb</code> – <strong>Optional.</strong> This field is required only for the <code class="language-plaintext highlighter-rouge">"PERSISTENT_1"</code> <code class="language-plaintext highlighter-rouge">deployment_type</code>. It describes the throughput speed <em>per tebibyte</em> of provisioned storage. Valid values are 50, 100, and 200. More information about this key can be found under <a href="https://docs.aws.amazon.com/fsx/latest/APIReference/API_CreateFileSystemLustreConfiguration.html">PerUnitStorageThroughput in the AWS documentation</a>.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">s3_import_path</code> – <strong>Optional.</strong> If entered, this is an Amazon S3 path that can be used as a data repository for importing data into the Lustre cluster.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">s3_export_path</code> – <strong>Optional.</strong> If entered, this is an Amazon S3 path that the Lustre cluster will export to.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">auto_import_policy</code> – <strong>Optional.</strong> If you have specified <code class="language-plaintext highlighter-rouge">s3_import_path</code> to import data from an S3 bucket into your Lustre filesystem, you can set the following options for importing new data:</p> <ul> <li> <p><code class="language-plaintext highlighter-rouge">"NONE"</code> – This is the default value. AWS will not update your Lustre cluster with files created or changed after the Lustre cluster is created.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">"NEW"</code> – This setting will automatically import new files from S3 into Lustre, but <strong>not</strong> changed files or deletions.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">"NEW_CHANGED"</code> – This setting will automatically import new files and changed files. Files deleted from S3 will <strong>not</strong> be deleted in Lustre.</p> </li> </ul> </li> <li> <p><code class="language-plaintext highlighter-rouge">imported_file_chunk_size_mb</code> – <strong>Optional.</strong> This value can be set if <code class="language-plaintext highlighter-rouge">s3_import_path</code> is set. It determines the stripe count and the maximum amount of data–in mebibytes–that can be located on a single physical disk. This value defaults to 1024, but can be set to any value between 1 and 512000 inclusive.</p> </li> </ul> <h2 id="outputs"> <a href="#outputs" class="anchor-heading" aria-labelledby="outputs"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Outputs </h2> <ul> <li> <p><code class="language-plaintext highlighter-rouge">lustre_file_systems.aws_security_group.lustre_file_systems</code> – This is a mapping between the cluster namd and the underlying <a href="https://registry.terraform.io/providers/hashicorp/aws/3.0.0/docs/resources/security_group"><code class="language-plaintext highlighter-rouge">aws_security_group</code> resource</a>. The security group opens up this filesystem to all traffic in the containing VPC.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">lustre_file_systems.aws_fsx_lustre_file_system.lustre_file_systems</code> – This is a mapping between the cluster name and the underlying <a href="https://registry.terraform.io/providers/hashicorp/aws/3.0.0/docs/resources/fsx_lustre_file_system"><code class="language-plaintext highlighter-rouge">aws_fsx_lustre_filesystem</code> resource</a></p> </li> <li> <p><code class="language-plaintext highlighter-rouge">lustre_file_systems.aws_route53_record.lustre_file_systems</code> – This is a mapping between the cluster name and the underlying <a href="https://registry.terraform.io/providers/hashicorp/aws/3.0.0/docs/resources/route53_record"><code class="language-plaintext highlighter-rouge">aws_route53_record</code> resource</a>.</p> </li> </ul> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0">Copyright &copy; 2020-2021 <a href="https://neocrym.com">Neocrym Records Inc</a>. Distributed via an <a href="https://github.com/provose/provose/blob/master/LICENSE">MIT license</a>. <a href="/privacy/">Privacy Policy</a>.</p> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
