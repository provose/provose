<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>containers | Provose</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="containers" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Provose is the easiest way to manage your Amazon Web Services infrastructure." /> <meta property="og:description" content="Provose is the easiest way to manage your Amazon Web Services infrastructure." /> <link rel="canonical" href="/v1.0/reference/containers/" /> <meta property="og:url" content="/v1.0/reference/containers/" /> <meta property="og:site_name" content="Provose" /> <meta property="og:image" content="https://provose.com/assets/images/1x/twitter-facebook-preview-card-1x.png" /> <meta name="twitter:card" content="summary_large_image" /> <meta property="twitter:image" content="https://provose.com/assets/images/1x/twitter-facebook-preview-card-1x.png" /> <meta property="twitter:title" content="containers" /> <meta name="twitter:site" content="@neocrym" /> <script type="application/ld+json"> {"image":"https://provose.com/assets/images/1x/twitter-facebook-preview-card-1x.png","@type":"WebPage","description":"Provose is the easiest way to manage your Amazon Web Services infrastructure.","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://provose.com/assets/images/1x/logo-black-on-transparent-1x.png"}},"headline":"containers","url":"/v1.0/reference/containers/","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"> <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"> <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"> <link rel="manifest" href="/site.webmanifest"> <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#2869e6"> <meta name="msapplication-TileColor" content="#2869e6"> <meta name="theme-color" content="#ffffff"> <script defer data-domain="provose.com" src="https://plausible.io/js/plausible.js"></script> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="/about/" class="nav-list-link">About</a></li><li class="nav-list-item"><a href="/contributing/" class="nav-list-link">Contributing to Provose</a></li><li class="nav-list-item"><a href="/changelog/" class="nav-list-link">Changelog</a></li><li class="nav-list-item"><a href="/philosophy/" class="nav-list-link">Philosophy</a></li><li class="nav-list-item"><a href="/security/" class="nav-list-link">Security</a></li><li class="nav-list-item"><a href="/naming/" class="nav-list-link">DNS and naming conventions</a></li><li class="nav-list-item"><a href="/amazon-machine-images-amis/" class="nav-list-link">Amazon Machine Images (AMIs)</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/v4.0/" class="nav-list-link">Docs v4.0 (Alpha Preview)</a><ul class="nav-list "><li class="nav-list-item "><a href="/v4.0/release-notes/" class="nav-list-link">Release notes</a></li><li class="nav-list-item "><a href="/v4.0/tutorial/" class="nav-list-link">Tutorial</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/v4.0/reference/" class="nav-list-link">Reference v4.0 (Alpha Preview)</a><ul class="nav-list"><li class="nav-list-item "> <a href="/v4.0/reference/batch/" class="nav-list-link">batch</a> </li><li class="nav-list-item "> <a href="/v4.0/reference/containers/" class="nav-list-link">containers</a> </li><li class="nav-list-item "> <a href="/v4.0/reference/ec2_on_demand_instances/" class="nav-list-link">ec2_on_demand_instances</a> </li><li class="nav-list-item "> <a href="/v4.0/reference/ec2_spot_instances/" class="nav-list-link">ec2_spot_instances</a> </li><li class="nav-list-item "> <a href="/v4.0/reference/elastic_file_systems/" class="nav-list-link">elastic_file_systems</a> </li><li class="nav-list-item "> <a href="/v4.0/reference/elasticsearch_clusters/" class="nav-list-link">elasticsearch_clusters</a> </li><li class="nav-list-item "> <a href="/v4.0/reference/https_redirects/" class="nav-list-link">https_redirects</a> </li><li class="nav-list-item "> <a href="/v4.0/reference/images/" class="nav-list-link">images</a> </li><li class="nav-list-item "> <a href="/v4.0/reference/lustre_file_systems/" class="nav-list-link">lustre_file_systems</a> </li><li class="nav-list-item "> <a href="/v4.0/reference/mysql_clusters/" class="nav-list-link">mysql_clusters</a> </li><li class="nav-list-item "> <a href="/v4.0/reference/overrides/" class="nav-list-link">overrides</a> </li><li class="nav-list-item "> <a href="/v4.0/reference/postgresql_clusters/" class="nav-list-link">postgresql_clusters</a> </li><li class="nav-list-item "> <a href="/v4.0/reference/provose_config/" class="nav-list-link">provose_config</a> </li><li class="nav-list-item "> <a href="/v4.0/reference/redis_clusters/" class="nav-list-link">redis_clusters</a> </li><li class="nav-list-item "> <a href="/v4.0/reference/s3_buckets/" class="nav-list-link">s3_buckets</a> </li><li class="nav-list-item "> <a href="/v4.0/reference/secrets/" class="nav-list-link">secrets</a> </li><li class="nav-list-item "> <a href="/v4.0/reference/source/" class="nav-list-link">source</a> </li></ul></li><li class="nav-list-item "><a href="/v4.0/debugging/" class="nav-list-link">Debugging</a></li><li class="nav-list-item "><a href="/v4.0/uninstalling/" class="nav-list-link">Uninstalling Provose</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/v3.0/" class="nav-list-link">Docs v3.0 (Stable)</a><ul class="nav-list "><li class="nav-list-item "><a href="/v3.0/release-notes/" class="nav-list-link">Release notes</a></li><li class="nav-list-item "><a href="/v3.0/tutorial/" class="nav-list-link">Tutorial</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/v3.0/reference/" class="nav-list-link">Reference v3.0 (Stable)</a><ul class="nav-list"><li class="nav-list-item "> <a href="/v3.0/reference/batch/" class="nav-list-link">batch</a> </li><li class="nav-list-item "> <a href="/v3.0/reference/containers/" class="nav-list-link">containers</a> </li><li class="nav-list-item "> <a href="/v3.0/reference/ec2_on_demand_instances/" class="nav-list-link">ec2_on_demand_instances</a> </li><li class="nav-list-item "> <a href="/v3.0/reference/ec2_spot_instances/" class="nav-list-link">ec2_spot_instances</a> </li><li class="nav-list-item "> <a href="/v3.0/reference/elastic_file_systems/" class="nav-list-link">elastic_file_systems</a> </li><li class="nav-list-item "> <a href="/v3.0/reference/elasticsearch_clusters/" class="nav-list-link">elasticsearch_clusters</a> </li><li class="nav-list-item "> <a href="/v3.0/reference/https_redirects/" class="nav-list-link">https_redirects</a> </li><li class="nav-list-item "> <a href="/v3.0/reference/images/" class="nav-list-link">images</a> </li><li class="nav-list-item "> <a href="/v3.0/reference/lustre_file_systems/" class="nav-list-link">lustre_file_systems</a> </li><li class="nav-list-item "> <a href="/v3.0/reference/mysql_clusters/" class="nav-list-link">mysql_clusters</a> </li><li class="nav-list-item "> <a href="/v3.0/reference/overrides/" class="nav-list-link">overrides</a> </li><li class="nav-list-item "> <a href="/v3.0/reference/postgresql_clusters/" class="nav-list-link">postgresql_clusters</a> </li><li class="nav-list-item "> <a href="/v3.0/reference/provose_config/" class="nav-list-link">provose_config</a> </li><li class="nav-list-item "> <a href="/v3.0/reference/redis_clusters/" class="nav-list-link">redis_clusters</a> </li><li class="nav-list-item "> <a href="/v3.0/reference/s3_buckets/" class="nav-list-link">s3_buckets</a> </li><li class="nav-list-item "> <a href="/v3.0/reference/secrets/" class="nav-list-link">secrets</a> </li><li class="nav-list-item "> <a href="/v3.0/reference/source/" class="nav-list-link">source</a> </li></ul></li><li class="nav-list-item "><a href="/v3.0/debugging/" class="nav-list-link">Debugging</a></li><li class="nav-list-item "><a href="/v3.0/uninstalling/" class="nav-list-link">Uninstalling Provose</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/v2.0/" class="nav-list-link">Docs v2.0 (Deprecated)</a><ul class="nav-list "><li class="nav-list-item "><a href="/v2.0/release-notes/" class="nav-list-link">Release notes</a></li><li class="nav-list-item "><a href="/v2.0/tutorial/" class="nav-list-link">Tutorial</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/v2.0/reference/" class="nav-list-link">Reference v2.0 (Deprecated)</a><ul class="nav-list"><li class="nav-list-item "> <a href="/v2.0/reference/batch/" class="nav-list-link">batch</a> </li><li class="nav-list-item "> <a href="/v2.0/reference/containers/" class="nav-list-link">containers</a> </li><li class="nav-list-item "> <a href="/v2.0/reference/ec2_on_demand_instances/" class="nav-list-link">ec2_on_demand_instances</a> </li><li class="nav-list-item "> <a href="/v2.0/reference/ec2_spot_instances/" class="nav-list-link">ec2_spot_instances</a> </li><li class="nav-list-item "> <a href="/v2.0/reference/elastic_file_systems/" class="nav-list-link">elastic_file_systems</a> </li><li class="nav-list-item "> <a href="/v2.0/reference/elasticsearch_clusters/" class="nav-list-link">elasticsearch_clusters</a> </li><li class="nav-list-item "> <a href="/v2.0/reference/https_redirects/" class="nav-list-link">https_redirects</a> </li><li class="nav-list-item "> <a href="/v2.0/reference/images/" class="nav-list-link">images</a> </li><li class="nav-list-item "> <a href="/v2.0/reference/lustre_file_systems/" class="nav-list-link">lustre_file_systems</a> </li><li class="nav-list-item "> <a href="/v2.0/reference/mysql_clusters/" class="nav-list-link">mysql_clusters</a> </li><li class="nav-list-item "> <a href="/v2.0/reference/overrides/" class="nav-list-link">overrides</a> </li><li class="nav-list-item "> <a href="/v2.0/reference/postgresql_clusters/" class="nav-list-link">postgresql_clusters</a> </li><li class="nav-list-item "> <a href="/v2.0/reference/provose_config/" class="nav-list-link">provose_config</a> </li><li class="nav-list-item "> <a href="/v2.0/reference/redis_clusters/" class="nav-list-link">redis_clusters</a> </li><li class="nav-list-item "> <a href="/v2.0/reference/s3_buckets/" class="nav-list-link">s3_buckets</a> </li><li class="nav-list-item "> <a href="/v2.0/reference/secrets/" class="nav-list-link">secrets</a> </li><li class="nav-list-item "> <a href="/v2.0/reference/source/" class="nav-list-link">source</a> </li></ul></li><li class="nav-list-item "><a href="/v2.0/debugging/" class="nav-list-link">Debugging</a></li><li class="nav-list-item "><a href="/v2.0/uninstalling/" class="nav-list-link">Uninstalling Provose</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/v1.1/" class="nav-list-link">Docs v1.1 (Deprecated)</a><ul class="nav-list "><li class="nav-list-item "><a href="/v1.1/release-notes/" class="nav-list-link">Release notes</a></li><li class="nav-list-item "><a href="/v1.1/tutorial/" class="nav-list-link">Tutorial</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/v1.1/reference/" class="nav-list-link">Reference v1.1 (Deprecated)</a><ul class="nav-list"><li class="nav-list-item "> <a href="/v1.1/reference/containers/" class="nav-list-link">containers</a> </li><li class="nav-list-item "> <a href="/v1.1/reference/ec2_instances/" class="nav-list-link">ec2_instances</a> </li><li class="nav-list-item "> <a href="/v1.1/reference/elasticsearch_clusters/" class="nav-list-link">elasticsearch_clusters</a> </li><li class="nav-list-item "> <a href="/v1.1/reference/images/" class="nav-list-link">images</a> </li><li class="nav-list-item "> <a href="/v1.1/reference/mysql_clusters/" class="nav-list-link">mysql_clusters</a> </li><li class="nav-list-item "> <a href="/v1.1/reference/overrides/" class="nav-list-link">overrides</a> </li><li class="nav-list-item "> <a href="/v1.1/reference/postgresql_clusters/" class="nav-list-link">postgresql_clusters</a> </li><li class="nav-list-item "> <a href="/v1.1/reference/provose_config/" class="nav-list-link">provose_config</a> </li><li class="nav-list-item "> <a href="/v1.1/reference/redis_clusters/" class="nav-list-link">redis_clusters</a> </li><li class="nav-list-item "> <a href="/v1.1/reference/s3_buckets/" class="nav-list-link">s3_buckets</a> </li><li class="nav-list-item "> <a href="/v1.1/reference/secrets/" class="nav-list-link">secrets</a> </li><li class="nav-list-item "> <a href="/v1.1/reference/source/" class="nav-list-link">source</a> </li></ul></li><li class="nav-list-item "><a href="/v1.1/debugging/" class="nav-list-link">Debugging</a></li><li class="nav-list-item "><a href="/v1.1/uninstalling/" class="nav-list-link">Uninstalling Provose</a></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/v1.0/" class="nav-list-link">Docs v1.0 (Deprecated)</a><ul class="nav-list "><li class="nav-list-item "><a href="/v1.0/release-notes/" class="nav-list-link">Release notes</a></li><li class="nav-list-item "><a href="/v1.0/tutorial/" class="nav-list-link">Tutorial</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/v1.0/reference/" class="nav-list-link">Reference v1.0 (Deprecated)</a><ul class="nav-list"><li class="nav-list-item active"> <a href="/v1.0/reference/containers/" class="nav-list-link active">containers</a> </li><li class="nav-list-item "> <a href="/v1.0/reference/ec2_instances/" class="nav-list-link">ec2_instances</a> </li><li class="nav-list-item "> <a href="/v1.0/reference/elasticsearch_clusters/" class="nav-list-link">elasticsearch_clusters</a> </li><li class="nav-list-item "> <a href="/v1.0/reference/images/" class="nav-list-link">images</a> </li><li class="nav-list-item "> <a href="/v1.0/reference/mysql_clusters/" class="nav-list-link">mysql_clusters</a> </li><li class="nav-list-item "> <a href="/v1.0/reference/overrides/" class="nav-list-link">overrides</a> </li><li class="nav-list-item "> <a href="/v1.0/reference/postgresql_clusters/" class="nav-list-link">postgresql_clusters</a> </li><li class="nav-list-item "> <a href="/v1.0/reference/provose_config/" class="nav-list-link">provose_config</a> </li><li class="nav-list-item "> <a href="/v1.0/reference/redis_clusters/" class="nav-list-link">redis_clusters</a> </li><li class="nav-list-item "> <a href="/v1.0/reference/s3_buckets/" class="nav-list-link">s3_buckets</a> </li><li class="nav-list-item "> <a href="/v1.0/reference/secrets/" class="nav-list-link">secrets</a> </li><li class="nav-list-item "> <a href="/v1.0/reference/source/" class="nav-list-link">source</a> </li></ul></li><li class="nav-list-item "><a href="/v1.0/debugging/" class="nav-list-link">Debugging</a></li><li class="nav-list-item "><a href="/v1.0/uninstalling/" class="nav-list-link">Uninstalling Provose</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Provose" aria-label="Search Provose" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/provose/provose/" class="site-button" > Provose on GitHub </a> </li> <li class="aux-nav-list-item"> <a href="https://www.neocrym.com" class="site-button" > Neocrym.com </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/v1.0/">Docs v1.0 (Deprecated)</a></li> <li class="breadcrumb-nav-list-item"><a href="/v1.0/reference/">Reference v1.0 (Deprecated)</a></li> <li class="breadcrumb-nav-list-item"><span>containers</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="containers"> <a href="#containers" class="anchor-heading" aria-labelledby="containers"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> containers </h1> <h2 id="description"> <a href="#description" class="anchor-heading" aria-labelledby="description"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Description </h2> <p>The Provose <code class="language-plaintext highlighter-rouge">containers</code> module automatically configures Docker containers to run on AWS Elastic Container Service (ECS).</p> <p>Provose abstracts over ECS concepts like clusters, services, task definitions, and image repositories. The <code class="language-plaintext highlighter-rouge">containers</code> module also helps set up Route 53 DNS settings, Amazon Certificate Manager (ACM) certificates to route TLS traffic, and AWS Application Load Balancer (ALBs) to balance the traffic across multiple containers.</p> <p>Provose supports running containers on EC2 instances or via AWS Fargate. It is generally easier to use AWS Fargate, but you should choose EC2 if you want to be able to SSH into the host instances or bind-mount host paths into your containers.</p> <p>Provose can pull publicly-available Docker images from Docker hub, or you can use the Provose images module to build and upload your own containers to Provose-managed Elastic Container Registry image repositories.</p> <h2 id="examples"> <a href="#examples" class="anchor-heading" aria-labelledby="examples"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Examples </h2> <h3 id="running-a-public-docker-container-on-aws-ecs-ec2"> <a href="#running-a-public-docker-container-on-aws-ecs-ec2" class="anchor-heading" aria-labelledby="running-a-public-docker-container-on-aws-ecs-ec2"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Running a public Docker container on AWS ECS EC2. </h3> <p>This example shows a total of four nginx “Hello World” containers running on two EC2 instances of the <code class="language-plaintext highlighter-rouge">t3.small</code> instance type.</p> <div class="language-terraform highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">module</span> <span class="s2">"myproject-ec2"</span> <span class="p">{</span>
  <span class="nx">source</span> <span class="p">=</span> <span class="s2">"github.com/provose/provose?ref=v1.0.2"</span>
  <span class="nx">provose_config</span> <span class="p">=</span> <span class="p">{</span>
    <span class="nx">authentication</span> <span class="p">=</span> <span class="p">{</span>
      <span class="nx">aws</span> <span class="p">=</span> <span class="p">{</span>
        <span class="nx">region</span> <span class="p">=</span> <span class="s2">"us-east-1"</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">name</span>                 <span class="p">=</span> <span class="s2">"myproject-ec2"</span>
    <span class="nx">internal_root_domain</span> <span class="p">=</span> <span class="s2">"example-internal.com"</span>
    <span class="nx">internal_subdomain</span>   <span class="p">=</span> <span class="s2">"myproject-ec2"</span>
  <span class="p">}</span>
  <span class="nx">containers</span> <span class="p">=</span> <span class="p">{</span>
    <span class="nx">hellooec2</span> <span class="p">=</span> <span class="p">{</span>
      <span class="nx">image</span> <span class="p">=</span> <span class="p">{</span>
        <span class="nx">name</span>             <span class="p">=</span> <span class="s2">"nginxdemos/hello"</span>
        <span class="nx">tag</span>              <span class="p">=</span> <span class="s2">"latest"</span>
        <span class="nx">private_registry</span> <span class="p">=</span> <span class="kc">false</span>
      <span class="p">}</span>
      <span class="nx">public</span> <span class="p">=</span> <span class="p">{</span>
        <span class="nx">https</span> <span class="p">=</span> <span class="p">{</span>
          <span class="nx">internal_http_port</span>              <span class="p">=</span> <span class="mi">80</span>
          <span class="nx">internal_http_health_check_path</span> <span class="p">=</span> <span class="s2">"/"</span>
          <span class="nx">public_dns_names</span>                <span class="p">=</span> <span class="p">[</span><span class="s2">"ec2.example.com"</span><span class="p">]</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="nx">instances</span> <span class="p">=</span> <span class="p">{</span>
        <span class="nx">instance_type</span>   <span class="p">=</span> <span class="s2">"t2.small"</span>
        <span class="nx">container_count</span> <span class="p">=</span> <span class="mi">4</span>
        <span class="nx">instance_count</span>  <span class="p">=</span> <span class="mi">2</span>
        <span class="nx">cpu</span>             <span class="p">=</span> <span class="mi">256</span>
        <span class="nx">memory</span>          <span class="p">=</span> <span class="mi">512</span>
        <span class="nx">bash_user_data</span>  <span class="p">=</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh">
#!/bin/bash
# Install Vim on the container hosts.
yum update -y
yum install vim
</span><span class="no">EOF
</span>      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div> <h3 id="running-a-public-docker-image-on-aws-fargate"> <a href="#running-a-public-docker-image-on-aws-fargate" class="anchor-heading" aria-labelledby="running-a-public-docker-image-on-aws-fargate"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Running a public Docker image on AWS Fargate. </h3> <p>This example shows ten nginx “Hello World” containers running on AWS Fargate.</p> <div class="language-terraform highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">module</span> <span class="s2">"myproject-fargate"</span> <span class="p">{</span>
  <span class="nx">source</span> <span class="p">=</span> <span class="s2">"github.com/provose/provose?ref=v1.0.2"</span>
  <span class="nx">provose_config</span> <span class="p">=</span> <span class="p">{</span>
    <span class="nx">authentication</span> <span class="p">=</span> <span class="p">{</span>
      <span class="nx">aws</span> <span class="p">=</span> <span class="p">{</span>
        <span class="nx">region</span> <span class="p">=</span> <span class="s2">"us-east-1"</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">name</span>                 <span class="p">=</span> <span class="s2">"myproject-fargate"</span>
    <span class="nx">internal_root_domain</span> <span class="p">=</span> <span class="s2">"example-internal.com"</span>
    <span class="nx">internal_subdomain</span>   <span class="p">=</span> <span class="s2">"myproject-fargate"</span>
  <span class="p">}</span>
  <span class="nx">containers</span> <span class="p">=</span> <span class="p">{</span>
    <span class="nx">hellofargate</span> <span class="p">=</span> <span class="p">{</span>
      <span class="nx">image</span> <span class="p">=</span> <span class="p">{</span>
        <span class="nx">name</span>             <span class="p">=</span> <span class="s2">"nginxdemos/hello"</span>
        <span class="nx">tag</span>              <span class="p">=</span> <span class="s2">"latest"</span>
        <span class="nx">private_registry</span> <span class="p">=</span> <span class="kc">false</span>
      <span class="p">}</span>
      <span class="nx">public</span> <span class="p">=</span> <span class="p">{</span>
        <span class="nx">https</span> <span class="p">=</span> <span class="p">{</span>
          <span class="nx">internal_http_port</span>              <span class="p">=</span> <span class="mi">80</span>
          <span class="nx">internal_http_health_check_path</span> <span class="p">=</span> <span class="s2">"/"</span>
          <span class="nx">public_dns_names</span>                <span class="p">=</span> <span class="p">[</span><span class="s2">"fargate.example.com"</span><span class="p">]</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="nx">instances</span> <span class="p">=</span> <span class="p">{</span>
        <span class="nx">instance_type</span>   <span class="p">=</span> <span class="s2">"FARGATE"</span>
        <span class="nx">container_count</span> <span class="p">=</span> <span class="mi">10</span>
        <span class="nx">cpu</span>             <span class="p">=</span> <span class="mi">256</span>
        <span class="nx">memory</span>          <span class="p">=</span> <span class="mi">512</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div> <h2 id="inputs"> <a href="#inputs" class="anchor-heading" aria-labelledby="inputs"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Inputs </h2> <ul> <li> <p><code class="language-plaintext highlighter-rouge">image</code> – <strong>Required.</strong> This object defines information about the Docker image that we are deploying.</p> <ul> <li> <p><code class="language-plaintext highlighter-rouge">name</code> – <strong>Required.</strong> The name of the image to use, including the namespace. For example, to use the <a href="https://hub.docker.com/r/nginxdemos/hello/">nginxdemos/hello</a> container on Docker Hub, set <code class="language-plaintext highlighter-rouge">name</code> to <code class="language-plaintext highlighter-rouge">"nginxdemos/hello"</code> and <code class="language-plaintext highlighter-rouge">private_registry</code> to <code class="language-plaintext highlighter-rouge">false</code>.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">tag</code> – <strong>Required.</strong> The Docker Registry tag of the image to use. This may be a particular tag or version number in Docker Hub or Elastic Container Registry (ECR). However, <code class="language-plaintext highlighter-rouge">"latest"</code> is a common value to pick the latest version of an image in the registry.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">private_registry</code> – <strong>Required.</strong> Set this to <code class="language-plaintext highlighter-rouge">true</code> to look for a container with the name set in <code class="language-plaintext highlighter-rouge">name</code> in your AWS account’s private Elastic Container Registry (ECR). You should configure the ECR repository for this image with the <a href="../images/">Provose <code class="language-plaintext highlighter-rouge">image</code> key</a>. Set this to <code class="language-plaintext highlighter-rouge">false</code> to use a publicly-available container on Docker Hub.</p> </li> </ul> </li> <li> <p><code class="language-plaintext highlighter-rouge">instances</code> – <strong>Required.</strong> This is an object that defines how this container is run.</p> <ul> <li> <p><code class="language-plaintext highlighter-rouge">instance_type</code> – <strong>Required.</strong> Set this to <code class="language-plaintext highlighter-rouge">"FARGATE"</code> to deploy the containers on AWS Fargate. Note that with Fargate, it will not be possible to use <code class="language-plaintext highlighter-rouge">bind_mounts</code> to mount to the host. If you want to deploy these containers on AWS EC2 instances, set this to the instance type of your choice, like <code class="language-plaintext highlighter-rouge">"t3.small"</code>. Keep in mind that AWS does not make all instance types available in all Availability Zones.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">container_count</code> – <strong>Required.</strong> This is the number of containers to deploy.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">instance_count</code> – <strong>Optional.</strong> This field is required if <code class="language-plaintext highlighter-rouge">instance_type</code> is an EC2 instance type, but is unused when <code class="language-plaintext highlighter-rouge">instance_type</code> is <code class="language-plaintext highlighter-rouge">"FARGATE"</code>.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">key_name</code> – <strong>Optional.</strong> Set this to the name of an AWS EC2 key pair in your account to enable SSH access to the instances. This only works if the <code class="language-plaintext highlighter-rouge">instance_type</code> is an EC2 instance type and <em>not</em> <code class="language-plaintext highlighter-rouge">"FARGATE"</code>.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">bash_user_data</code> – <strong>Optional.</strong> This is a bash script that will be run on the creation of the underlying AWS instances. This field does nothing if the container is deployed with AWS Fargate.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">cpu</code> – <strong>Required.</strong> The CPU units given to each container. 1024 CPU units maps to one vCPU on AWS. This is a <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task-cpu-memory-error.html">minimum</a> of 128 if <code class="language-plaintext highlighter-rouge">instance_type</code> is an EC2 instance type, or 256 if the instance type is Fargate.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">memory</code> – <strong>Required.</strong> The amount of memory–in megabytes–given to each container. This must be in <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task-cpu-memory-error.html">proportion</a>. For example, a Fargate task with 256 CPU units can have 512, 1024, or 2048 megabytes of memory.</p> </li> </ul> </li> <li> <p><code class="language-plaintext highlighter-rouge">entrypoint</code> – <strong>Optional.</strong> Defines a custom container entrypoint, if you do not want to use the entrypoint defined within the container.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">command</code> – <strong>Optional.</strong> Defines a custom container command. Use this if you do not want to use the command defined within the container.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">environment</code> – <strong>Optional.</strong> This is a mapping of environment variables and their values.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">secrets</code> – <strong>Optional.</strong> This is a mapping of environment variable names to Provose secret names.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">efs_volumes</code> – <strong>Optional.</strong> This is a mapping of the AWS Elastic File System (EFS) volumes to mount within the container.</p> <ul> <li><code class="language-plaintext highlighter-rouge">container_mount</code> – <strong>Required.</strong> The path in the container to mount the EFS volume.</li> </ul> </li> <li> <p><code class="language-plaintext highlighter-rouge">bind_mounts</code> – <strong>Optional.</strong> This is only for containers running with an EC2 <code class="language-plaintext highlighter-rouge">instance_type</code>. These are mounted filesystem paths from the EC2 host into the containers. This will not work for containers running on AWS Fargate because there is no concept of a host with a filesystem.</p> <ul> <li> <p><code class="language-plaintext highlighter-rouge">host_mount</code> – <strong>Required.</strong> The directory on the container host to mount in the container.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">container_mount</code> – <strong>Required.</strong> The path in the container to mount the host filesystem.</p> </li> </ul> </li> <li> <p><code class="language-plaintext highlighter-rouge">public</code> – <strong>Optional.</strong> This mapping configures network access from the public IPv4 Internet to the container.</p> <ul> <li> <p><code class="language-plaintext highlighter-rouge">https</code> – <strong>Optional.</strong> This mapping configures the Application Load Balancer (ALB) that allows HTTP/HTTPS requests from the public Internet to the container. Use this if your container is an HTTP server.</p> <ul> <li> <p><code class="language-plaintext highlighter-rouge">public_dns_names</code> – <strong>Required.</strong> A list of DNS names–like <code class="language-plaintext highlighter-rouge">example.com</code> or <code class="language-plaintext highlighter-rouge">subdomain.example.com</code> to point at this container. Your AWS account must own the underlying domain name and be able to set the DNS records. Provose will also generate Amazon Certificate Manager (ACM) certificate for the DNS names provided–enabling access to the container via HTTPS.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">internal_http_port</code> – <strong>Required.</strong> This is the port exposed by the container to serve HTTP requests. The load balancer listens on port 80 and 443 to forward ports to the given port on the container.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">internal_http_health_check_path</code> – <strong>Required.</strong> This is a URL path, like <code class="language-plaintext highlighter-rouge">/robots.txt</code>, that the Application Load Balancer (ALB) checks to determine whether the container is healthy. This path must return a 200 OK If the ALB decides a container is unhealthy, it will be removed from routing.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">internal_http_health_check_timeout</code> – <strong>Optional.</strong> This sets the timeout for the HTTP requests that the Application Load Balancer (ALB)’s health checks. If this field is omitted, it defaults to 5 seconds.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">stickiness_cookie_duration_seconds</code> – <strong>Optional.</strong> If this value is present, it enables <em>stickiness</em> on the Application Load Balancer. Stickiness is the mechanism for client requests to consistently be routed to the same container instance behind the Application Load Balancer (ALB). The ALB sets an HTTP cookie for the first client request it receives, and then checks for the cookie on subsequent requests. The cookie eventually expires, and this value sets the expiration for the cookie–in seconds.</p> </li> </ul> </li> </ul> </li> <li> <p><code class="language-plaintext highlighter-rouge">vpc</code> – <strong>Optional.</strong> This mapping configures network access to the container from within the VPC that Provose creates.</p> <ul> <li> <p><code class="language-plaintext highlighter-rouge">https</code> – <strong>Optional.</strong> This mapping configures the Application Load Balancer (ALB) that allows HTTP/HTTPS traffic from within the VPC. Use this if your container is an HTTP server.</p> <ul> <li> <p><code class="language-plaintext highlighter-rouge">vpc_dns_names</code> – <strong>Required.</strong> A list of DNS names–like <code class="language-plaintext highlighter-rouge">example.com</code> or <code class="language-plaintext highlighter-rouge">subdomain.example.com</code> to point at this container. <strong>These domains must be used to serve internal traffic to your VPC. The <code class="language-plaintext highlighter-rouge">vpc</code> Provose configuration does not serve traffic to the public Internet.</strong> Your AWS account must own the underlying domain name and be able to set the DNS records. Provose will also generate Amazon Certificate Manager (ACM) certificate for the DNS names provided–enabling access to the container via HTTPS.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">internal_http_port</code> – <strong>Required.</strong> This is the port exposed by the container to serve HTTP requests. The load balancer listens on port 80 and 443 to forward ports to the given port on the container.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">internal_http_health_check_path</code> – <strong>Required.</strong> This is a URL path, like <code class="language-plaintext highlighter-rouge">/robots.txt</code>, that the Application Load Balancer (ALB) checks to determine whether the container is healthy. This path must return a 200 OK If the ALB decides a container is unhealthy, it will be removed from routing.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">internal_http_health_check_timeout</code> – <strong>Optional.</strong> This sets the timeout for the HTTP requests that the Application Load Balancer (ALB)’s health checks. If this field is omitted, it defaults to 5 seconds.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">stickiness_cookie_duration_seconds</code> – <strong>Optional.</strong> If this value is present, it enables <em>stickiness</em> on the Application Load Balancer. Stickiness is the mechanism for client requests to consistently be routed to the same container instance behind the Application Load Balancer (ALB). The ALB sets an HTTP cookie for the first client request it receives, and then checks for the cookie on subsequent requests. The cookie eventually expires, and this value sets the expiration for the cookie–in seconds.</p> </li> </ul> </li> </ul> </li> <li> <p><code class="language-plaintext highlighter-rouge">s3_buckets</code> – <strong>Optional.</strong> This is a mapping of S3 buckets to the classes of permissions available to the instances. The four classes of permissions available are <code class="language-plaintext highlighter-rouge">list</code>, <code class="language-plaintext highlighter-rouge">get</code>, <code class="language-plaintext highlighter-rouge">put</code>, and <code class="language-plaintext highlighter-rouge">delete</code>, and the values for each one is <code class="language-plaintext highlighter-rouge">true</code> or <code class="language-plaintext highlighter-rouge">false</code>. To use this configuration, place the <code class="language-plaintext highlighter-rouge">s3_buckets</code> key <strong>inside</strong> a block that defines a container. Below is an example of how to give the container access to two buckets–one with <code class="language-plaintext highlighter-rouge">list</code> and <code class="language-plaintext highlighter-rouge">get</code> permissions, and another with <code class="language-plaintext highlighter-rouge">get</code> and <code class="language-plaintext highlighter-rouge">delete</code> permissions.</p> </li> </ul> <div class="language-terraform highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">s3_buckets</span> <span class="err">=</span> <span class="p">{</span>
  <span class="s2">"some-bucket-name.example-internal.com"</span> <span class="p">=</span> <span class="p">{</span>
    <span class="nx">permissions</span> <span class="p">=</span> <span class="p">{</span>
      <span class="nx">list</span>   <span class="p">=</span> <span class="kc">true</span>
      <span class="nx">get</span>    <span class="p">=</span> <span class="kc">true</span>
      <span class="nx">put</span>    <span class="p">=</span> <span class="kc">false</span>
      <span class="nx">delete</span> <span class="p">=</span> <span class="kc">false</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="s2">"another-bucket.com"</span> <span class="p">=</span> <span class="p">{</span>
    <span class="nx">permissions</span> <span class="p">=</span> <span class="p">{</span>
      <span class="nx">list</span>   <span class="p">=</span> <span class="kc">false</span>
      <span class="nx">get</span>    <span class="p">=</span> <span class="kc">true</span>
      <span class="nx">put</span>    <span class="p">=</span> <span class="kc">false</span>
      <span class="nx">delete</span> <span class="p">=</span> <span class="kc">true</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <h2 id="outputs"> <a href="#outputs" class="anchor-heading" aria-labelledby="outputs"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Outputs </h2> <p>Provose provides these Terraform outputs to enable users to patch certain advanced configurations that cannot be configured via the inputs.</p> <ul> <li> <p><code class="language-plaintext highlighter-rouge">containers.aws_security_group.container__internal_http_port</code> – A mapping between container names and the <a href="https://www.terraform.io/docs/providers/aws/r/security_group.html"><code class="language-plaintext highlighter-rouge">aws_security_group</code> resources</a> that govern network access to each container.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">containers.aws_ecs_cluster.container</code> – This is a mapping between container names and their corresponding <a href="https://www.terraform.io/docs/providers/aws/r/ecs_cluster.html"><code class="language-plaintext highlighter-rouge">aws_ecs_cluster</code> resources</a>. Provose gives every container definition its own cluster.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">containers.aws_ecs_task_definition.container</code> – A mapping between container names and their corresponding <a href=""><code class="language-plaintext highlighter-rouge">aws_ecs_task_definition</code> resource</a>https://www.terraform.io/docs/providers/aws/r/ecs_task_definition.html.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">containers.aws_lb_target_group.container__public_https</code> – A mapping between container names and the containers’ corresponding <a href="https://www.terraform.io/docs/providers/aws/r/lb_target_group.html"><code class="language-plaintext highlighter-rouge">aws_lb_target_group</code> resources</a>.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">containers.aws_lb_target_group.container__vpc_https</code> – These are <a href="https://www.terraform.io/docs/providers/aws/r/lb_target_group.html"><code class="language-plaintext highlighter-rouge">aws_lb_target_group</code> resources</a> for each container that give HTTPS access from within a VPC.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">containers.aws_lb_listener_rule.container__public_https</code> – These are <a href="https://www.terraform.io/docs/providers/aws/r/lb_listener_rule.html"><code class="language-plaintext highlighter-rouge">aws_lb_listener_rule</code> resources</a> for each container that give public HTTPS access.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">containers.aws_ecs_service.container</code> – A mapping of <a href="https://www.terraform.io/docs/providers/aws/r/ecs_service.html"><code class="language-plaintext highlighter-rouge">aws_ecs_service</code> resources</a> for each container name. In Provose, each container only belongs to one service.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">containers.aws_instance.container__instance</code> – A mapping of <a href="https://www.terraform.io/docs/providers/aws/r/instance.html"><code class="language-plaintext highlighter-rouge">aws_instance</code> resources</a> being used to host containers. This will be empty if you are running all of your containers with AWS Fargate as opposed to using EC2 hosts.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">containers.aws_route53_record.container__instance</code> – A mapping of <a href="https://www.terraform.io/docs/providers/aws/r/route53_record.html"><code class="language-plaintext highlighter-rouge">aws_route53_record</code> resources</a> for EC2 instances hosting containers. This will be empty if you are running all of your containers with AWS Fargate as opposed to EC2.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">containers.aws_route53_record.container__public_https</code> – A mapping of <a href="https://www.terraform.io/docs/providers/aws/r/route53_record.html"><code class="language-plaintext highlighter-rouge">aws_route53_record</code> resources</a> that point to public HTTPS websites served by containers.</p> </li> <li><code class="language-plaintext highlighter-rouge">containers.aws_route53_record.container__public_https_validation</code> – A mapping of <a href="https://www.terraform.io/docs/providers/aws/r/route53_record.html"><code class="language-plaintext highlighter-rouge">aws_route53_record</code> resources</a> that were created specifically to validate the Amazon Certificate Manager certificates for domain names that we point a container to.</li> <li> <p><code class="language-plaintext highlighter-rouge">containers.aws_route53_record.container__vpc_https</code> – A mapping of <a href="https://www.terraform.io/docs/providers/aws/r/route53_record.html"><code class="language-plaintext highlighter-rouge">aws_route53_record</code> resources</a> created for DNS resolution to HTTPS websites <em>within the VPC.</em></p> </li> <li> <p><code class="language-plaintext highlighter-rouge">containers.aws_route53_record.container__instance_spot</code> – A mapping of <a href="https://www.terraform.io/docs/providers/aws/r/route53_record.html"><code class="language-plaintext highlighter-rouge">aws_route53_record</code> resources</a> for container spot instances.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">containers.aws_route53_zone.external_dns__for_containers</code> – A mapping from container names to <a href="https://www.terraform.io/docs/providers/aws/r/route53_zone.html"><code class="language-plaintext highlighter-rouge">aws_route53_zone</code> resources</a> describing the Route 53 zones that contain the domain names that serve traffic to each container.</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">containers.aws_acm_certificate.container__public_https</code> – A mapping of <a href="https://www.terraform.io/docs/providers/aws/r/acm_certificate.html"><code class="language-plaintext highlighter-rouge">aws_acm_certificate</code> resources</a> representing the TLS certificates that communicate connections to the container from the public Internet.</p> </li> <li><code class="language-plaintext highlighter-rouge">containers.aws_acm_certificate_validation.container__public_https_validation</code> – A mapping of <a href="https://www.terraform.io/docs/providers/aws/r/acm_certificate_validation.html"><code class="language-plaintext highlighter-rouge">aws_acm_certificate_validation</code> resources</a>. Use this to debug issues with Amazon Certificate Manager (ACM) certificate validation.</li> </ul> <h2 id="implementation-details"> <a href="#implementation-details" class="anchor-heading" aria-labelledby="implementation-details"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Implementation details </h2> <h3 id="container-networking-modes"> <a href="#container-networking-modes" class="anchor-heading" aria-labelledby="container-networking-modes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Container networking modes </h3> <p>Containers launched with the <code class="language-plaintext highlighter-rouge">"FARGATE"</code> instance type are launched with the <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task-networking.html"><code class="language-plaintext highlighter-rouge">"awsvpc"</code></a> container networking mode.</p> <p>Containers launched with one of the EC2 instance types are launched with the <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/task_definition_parameters.html"><code class="language-plaintext highlighter-rouge">"bridge"</code></a> container networking mode. This is because ECS EC2 containers do not have public Internet access unless the containers are both launched in a private subnet and connected to the Internet through a NAT gateway. The NAT gateway costs additional money, so we can save money by using the <code class="language-plaintext highlighter-rouge">"bridge"</code> networking mode instead. This, according to Amazon, is slightly less performant, but the faster <code class="language-plaintext highlighter-rouge">"awsvpc"</code> networking mode is still available for Fargate containers through Provose.</p> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0">Copyright &copy; 2020-2021 <a href="https://neocrym.com">Neocrym Records Inc</a>. Distributed via an <a href="https://github.com/provose/provose/blob/master/LICENSE">MIT license</a>. <a href="https://neocrym.com/privacy/">Privacy Policy</a>.</p> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
